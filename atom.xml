<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://jashion.github.io</id>
    <title>Gridea</title>
    <updated>2023-03-27T03:29:06.440Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://jashion.github.io"/>
    <link rel="self" href="https://jashion.github.io/atom.xml"/>
    <subtitle>æ¸©æ•…è€ŒçŸ¥æ–°</subtitle>
    <logo>https://jashion.github.io/images/avatar.png</logo>
    <icon>https://jashion.github.io/favicon.ico</icon>
    <rights>All rights reserved 2023, Gridea</rights>
    <entry>
        <title type="html"><![CDATA[123]]></title>
        <id>https://jashion.github.io/post/123/</id>
        <link href="https://jashion.github.io/post/123/">
        </link>
        <updated>2023-03-27T03:09:18.000Z</updated>
        <content type="html"><![CDATA[<p>123</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Some App Tech Support]]></title>
        <id>https://jashion.github.io/post/some-app-tech-support/</id>
        <link href="https://jashion.github.io/post/some-app-tech-support/">
        </link>
        <updated>2023-03-27T02:27:21.000Z</updated>
        <content type="html"><![CDATA[<p>BMuSimpleCalculator:<br>
The BMuSimpleCalculator is a simple calculator which has addition, subtraction, mutiplication and division features.<br>
<img src="https://jashion.github.io/post-images/1679884104337.png" alt="" loading="lazy"><br>
Getting Support:<br>
mail:ycyz138258886@gmail.com<br>
or leave comment below.</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Privacy Policy]]></title>
        <id>https://jashion.github.io/post/privacy-policy/</id>
        <link href="https://jashion.github.io/post/privacy-policy/">
        </link>
        <updated>2023-03-25T08:25:13.000Z</updated>
        <content type="html"><![CDATA[<p><strong>Privacy Policy</strong></p>
<p>HuangJinHua built the BMuSimpleCalculator app as a Free app. This SERVICE is provided by HuangJinHua at no cost and is intended for use as is.</p>
<p>This page is used to inform visitors regarding my policies with the collection, use, and disclosure of Personal Information if anyone decided to use my Service.</p>
<p>If you choose to use my Service, then you agree to the collection and use of information in relation to this policy. The Personal Information that I collect is used for providing and improving the Service. I will not use or share your information with anyone except as described in this Privacy Policy.</p>
<p>The terms used in this Privacy Policy have the same meanings as in our Terms and Conditions, which are accessible at BMuSimpleCalculator unless otherwise defined in this Privacy Policy.</p>
<p><strong>Information Collection and Use</strong></p>
<p>For a better experience, while using our Service, I may require you to provide us with certain personally identifiable information. The information that I request will be retained on your device and is not collected by me in any way.</p>
<p>The app does use third-party services that may collect information used to identify you.</p>
<p>Link to the privacy policy of third-party service providers used by the app</p>
<ul>
<li><a href="https://www.google.com/policies/privacy/">Google Play Services</a></li>
</ul>
<p><strong>Log Data</strong></p>
<p>I want to inform you that whenever you use my Service, in a case of an error in the app I collect data and information (through third-party products) on your phone called Log Data. This Log Data may include information such as your device Internet Protocol (â€œIPâ€) address, device name, operating system version, the configuration of the app when utilizing my Service, the time and date of your use of the Service, and other statistics.</p>
<p><strong>Cookies</strong></p>
<p>Cookies are files with a small amount of data that are commonly used as anonymous unique identifiers. These are sent to your browser from the websites that you visit and are stored on your device's internal memory.</p>
<p>This Service does not use these â€œcookiesâ€ explicitly. However, the app may use third-party code and libraries that use â€œcookiesâ€ to collect information and improve their services. You have the option to either accept or refuse these cookies and know when a cookie is being sent to your device. If you choose to refuse our cookies, you may not be able to use some portions of this Service.</p>
<p><strong>Service Providers</strong></p>
<p>I may employ third-party companies and individuals due to the following reasons:</p>
<ul>
<li>To facilitate our Service;</li>
<li>To provide the Service on our behalf;</li>
<li>To perform Service-related services; or</li>
<li>To assist us in analyzing how our Service is used.</li>
</ul>
<p>I want to inform users of this Service that these third parties have access to their Personal Information. The reason is to perform the tasks assigned to them on our behalf. However, they are obligated not to disclose or use the information for any other purpose.</p>
<p><strong>Security</strong></p>
<p>I value your trust in providing us your Personal Information, thus we are striving to use commercially acceptable means of protecting it. But remember that no method of transmission over the internet, or method of electronic storage is 100% secure and reliable, and I cannot guarantee its absolute security.</p>
<p><strong>Links to Other Sites</strong></p>
<p>This Service may contain links to other sites. If you click on a third-party link, you will be directed to that site. Note that these external sites are not operated by me. Therefore, I strongly advise you to review the Privacy Policy of these websites. I have no control over and assume no responsibility for the content, privacy policies, or practices of any third-party sites or services.</p>
<p><strong>Childrenâ€™s Privacy</strong></p>
<p>These Services do not address anyone under the age of 13. I do not knowingly collect personally identifiable information from children under 13 years of age. In the case I discover that a child under 13 has provided me with personal information, I immediately delete this from our servers. If you are a parent or guardian and you are aware that your child has provided us with personal information, please contact me so that I will be able to do the necessary actions.</p>
<p><strong>Changes to This Privacy Policy</strong></p>
<p>I may update our Privacy Policy from time to time. Thus, you are advised to review this page periodically for any changes. I will notify you of any changes by posting the new Privacy Policy on this page.</p>
<p>This policy is effective as of 2023-03-25</p>
<p><strong>Contact Us</strong></p>
<p>If you have any questions or suggestions about my Privacy Policy, do not hesitate to contact me at ycyz138258886@qq.com.</p>
<p>This privacy policy page was created at <a href="https://privacypolicytemplate.net">privacypolicytemplate.net</a> and modified/generated by <a href="https://app-privacy-policy-generator.nisrulz.com/">App Privacy Policy Generator</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[iOSè§‚å¯Ÿè€…æ¨¡å¼]]></title>
        <id>https://jashion.github.io/post/ios-guan-cha-zhe-mo-shi/</id>
        <link href="https://jashion.github.io/post/ios-guan-cha-zhe-mo-shi/">
        </link>
        <updated>2019-05-15T07:19:26.000Z</updated>
        <summary type="html"><![CDATA[<h2 id="kvcä¸kvoç®€ä»‹">KVCä¸KVOç®€ä»‹</h2>
<ul>
<li>KVC<br></li>
</ul>
<blockquote>
<p>KVCï¼ˆKey-value codingï¼‰æ˜¯ä¸€ç§é—´æ¥æ›´æ”¹å¯¹è±¡çŠ¶æ€çš„æ–¹å¼ã€‚<br><br>
Â å®˜æ–¹æ–‡æ¡£æè¿°ï¼š<br><br>
Â Key-value coding is a mechanism for accessing anÂ  objectâ€™s properties indirectly, using strings to identify properties, rather than through invocation of an accessor method or accessing them directly through instance variables. In essence, key-value coding defines the patterns and method signatures that your applicationâ€™s accessor methods implement.</p>
</blockquote>
]]></summary>
        <content type="html"><![CDATA[<h2 id="kvcä¸kvoç®€ä»‹">KVCä¸KVOç®€ä»‹</h2>
<ul>
<li>KVC<br></li>
</ul>
<blockquote>
<p>KVCï¼ˆKey-value codingï¼‰æ˜¯ä¸€ç§é—´æ¥æ›´æ”¹å¯¹è±¡çŠ¶æ€çš„æ–¹å¼ã€‚<br><br>
Â å®˜æ–¹æ–‡æ¡£æè¿°ï¼š<br><br>
Â Key-value coding is a mechanism for accessing anÂ  objectâ€™s properties indirectly, using strings to identify properties, rather than through invocation of an accessor method or accessing them directly through instance variables. In essence, key-value coding defines the patterns and method signatures that your applicationâ€™s accessor methods implement.</p>
</blockquote>
<!--more-->
<ul>
<li>KVCçš„ä½œç”¨<br></li>
</ul>
<blockquote>
<p>é€šè¿‡é”®å€¼çš„æ–¹å¼è®¿é—®å¯¹è±¡æˆ–è€…ä¿®æ”¹å¯¹è±¡çš„å€¼<br><br>
Â æ¯”å¦‚ï¼šNSString *name = [car valueForKey: @&quot;name&quot;];é€šè¿‡-valueForKey:è·å–å¯¹è±¡ï¼Œå®ƒä¼šå…ˆæŸ¥æ‰¾ä»¥å‚æ•°åå‘½åï¼ˆæ ¼å¼ä¸º-keyæˆ–-isKeyï¼‰çš„getteræ–¹æ³•ï¼Œå¯¹äºä¸Šé¢çš„è°ƒç”¨ï¼ŒvalueForKey:ä¼šå…ˆå¯»æ‰¾-nameæ–¹æ³•ã€‚å¦‚æœæ²¡æœ‰è¿™æ ·çš„getteræ–¹æ³•ï¼Œå®ƒå°†ä¼šåœ¨å¯¹è±¡å†…å¯»æ‰¾åç§°æ ¼å¼ä¸º_keyæˆ–keyçš„å®ä¾‹å˜é‡ã€‚é€šè¿‡ä½¿ç”¨KVCï¼Œæ²¡æœ‰ç›¸å…³getteræ–¹æ³•ä¹Ÿèƒ½è·å–å¯¹è±¡ï¼Œä¸éœ€è¦é€šè¿‡å¯¹è±¡æŒ‡é’ˆæ¥ç›´æ¥è®¿é—®å®ä¾‹å˜é‡ã€‚</p>
</blockquote>
<p>Â 
<ul>
<li>KVCçš„ä¼˜ç¼ºç‚¹<br></li>
</ul>
<blockquote>
<p>1.KVCå¯ä»¥è½»æ¾å¤„ç†é›†åˆç±»ã€‚ï¼ˆå¦‚ï¼šNSArrayï¼‰<br><br>
Â 2.KVCæ²¡æœ‰ç›¸å…³getteræ–¹æ³•ä¹Ÿèƒ½è·å–å¯¹è±¡ï¼Œä¸éœ€è¦é€šè¿‡å¯¹è±¡æŒ‡é’ˆæ¥ç›´æ¥è®¿é—®å®ä¾‹å˜é‡<br><br>
Â 3.ç®€åŒ–ä»£ç <br><br>
Â 4.KVCéœ€è¦è§£æå­—ç¬¦ä¸²ï¼Œé€Ÿåº¦æ¯”è¾ƒæ…¢<br><br>
Â 5.ç¼–è¯‘å™¨æ— æ³•è¿›è¡Œé”™è¯¯æ£€æŸ¥<br></p>
</blockquote>
<ul>
<li>KVO<br></li>
</ul>
<blockquote>
<p>KVOï¼ˆKey-value Observingï¼‰æ˜¯åŸºäºKVCçš„ï¼Œä¸€ç§ç›‘å¬æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„è§‚å¯Ÿè€…æ¨¡å¼ã€‚<br><br>
Â å®˜æ–¹æ–‡æ¡£æè¿°ï¼š<br><br>
Â Key-value observing provides a mechanism that allows objects to be notified of changes to specific properties of other objects. It is particularly useful for communication between model and controller layers in an application.</p>
</blockquote>
<h2 id="kvcä»£ç å®ç°">KVCä»£ç å®ç°</h2>
<pre><code>//1.setValue: forKey
[car setValue: @&quot;å¥”é©°&quot; forKey: @&quot;name&quot;];
[car setValue: [NSNumber numberWithFloat: 80] forKey: @&quot;speed&quot;];
[car setValue: @&quot;é»‘è‰²&quot; forKey: @&quot;carPaint&quot;];

//1.valueForKey
NSString *name = [currentCar valueForKey: @&quot;name&quot;];
NSNumber *speed = [currentCar valueForKey: @&quot;speed&quot;];
NSString *carPaint = [currentCar valueForKey: @&quot;carPaint&quot;];

//2.setValue:forKeyPath
[car setValue: [NSNumber numberWithFloat: 40] forKeyPath: @&quot;engine.horsepower&quot;];
self.showCarDetail.text = [self showCarDetail: car];

//2.valueForKeyPath
NSNumber *horsepower = [currentCar valueForKeyPath: @&quot;engine.horsepower&quot;];

//3.æ•´ä½“æ“ä½œ:è®¿é—®æ•°ç»„ï¼Œå¦‚æœä½¿ç”¨æŸä¸ªé”®å€¼æ¥è®¿é—®ä¸€ä¸ªNSArrayæ•°ç»„ï¼Œå®ƒå®é™…ä¸Šä¼šæŸ¥è¯¢ç›¸åº”æ•°ç»„ä¸­çš„æ¯ä¸ªå¯¹è±¡ï¼Œç„¶åå°†æŸ¥è¯¢ç»“æœå¤§åŒ…åˆ°å¦ä¸€ä¸ªæ•°ç»„å¹¶è¿”å›ï¼Œä½†æ˜¯ä¸èƒ½ç›´æ¥åœ¨å»ºè·¯å¾„ä¸­ç´¢å¼•è¿™äº›æ•°ç»„ï¼Œå¦‚ï¼štires[0].pressure
NSArray *pressures = [currentCar valueForKeyPath: @&quot;tires.pressure&quot;];
NSLog(@&quot;%@&quot;, pressures);

//4.å¿«é€Ÿè¿ç®—@count,@sum,@avg,@min,@max,@distinctUnionOfObjects
NSNumber *count = [currentCar valueForKeyPath: @&quot;tires.@count&quot;];Â  Â  //å¯¹å·¦è¾¹é”®å€¼è¿”å›æ•°ç»„æ“ä½œï¼Œè·å–æ•°ç»„æ•°é‡
NSNumber *sum = [currentCar valueForKeyPath: @&quot;tires.@sum.pressure&quot;];Â  Â  //å¯¹å·¦è¾¹é”®å€¼è¿”å›æ•°ç»„æ“ä½œï¼Œè·å–æ¯ä¸ªæ•°ç»„é‡Œé¢çš„pressureå€¼ï¼Œæ±‚å’Œ
NSNumber *avg = [currentCar valueForKeyPath: @&quot;tires.@avg.pressure&quot;];Â  Â  //å¯¹å·¦è¾¹é”®å€¼è¿”å›æ•°ç»„æ“ä½œï¼Œè·å–æ¯ä¸ªæ•°ç»„é‡Œé¢çš„pressureå€¼ï¼Œæ±‚å¹³å‡å€¼
NSNumber *min = [currentCar valueForKeyPath: @&quot;tires.@min.pressure&quot;];Â  Â  //å¯¹å·¦è¾¹é”®å€¼è¿”å›æ•°ç»„æ“ä½œï¼Œè·å–æ¯ä¸ªæ•°ç»„é‡Œé¢çš„pressureå€¼ï¼Œæ‰¾å‡ºæœ€å°å€¼
NSNumber *max = [currentCar valueForKeyPath: @&quot;tires.@max.pressure&quot;];Â  Â  //å¯¹å·¦è¾¹é”®å€¼è¿”å›æ•°ç»„æ“ä½œï¼Œè·å–æ¯ä¸ªæ•°ç»„é‡Œé¢çš„pressureå€¼ï¼Œæ‰¾å‡ºæœ€å¤§å€¼
NSArray *tireType = [currentCar valueForKeyPath: @&quot;tires.@distinctUnionOfObjects.pressure&quot;];Â  Â  //å¯¹å·¦è¾¹é”®å€¼è¿”å›æ•°ç»„æ“ä½œï¼Œè·å–æ¯ä¸ªæ•°ç»„é‡Œé¢çš„pressureå€¼ï¼Œå»æ‰é‡å¤çš„å€¼ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰ä¸é‡å¤å€¼çš„æ•°ç»„
NSLog(@&quot;TiresCount: %@ Sum: %@, Avg: %@, Min: %@, Max: %@, TireType: %@&quot;, count, sum, avg, min, max, tireType);

//5.æ‰¹å¤„ç†
//å­—å…¸é‡Œé¢ä¸èƒ½ä¸ºnilï¼Œå¦‚æœè¿”å›å€¼æœ‰nilï¼Œåˆ™KVCä¼šè‡ªå·±å¤„ç†ï¼Œå°†è¿”å›[NSNull null]è¡¨ç¤ºnil
//&lt;null&gt;å’Œ(null)çš„åŒºåˆ«ï¼šå‰è€…æ˜¯[NSNull null]å¯¹è±¡ï¼Œè€Œåè€…æ˜¯æ­£çœŸçš„nilã€‚
NSArray *keys = [NSArray arrayWithObjects: @&quot;make&quot;, @&quot;modelYear&quot;, @&quot;numberOfDoors&quot;, nil];
NSDictionary *carValues = [currentCar dictionaryWithValuesForKeys: keys];
NSLog(@&quot;%@&quot;, carValues);
Â Â  Â 
//6.nilå¤„ç†
//å¯ä»¥è‡ªå·±è¿è¡Œä¸€ä¸‹ï¼Œé‡å†™å’Œæ²¡æœ‰é‡å†™setNilValueForKey:æ–¹æ³•çš„ä»£ç 
[currentCar setValue: nil forKey: @&quot;speed&quot;];
NSLog(@&quot;carSpeed: %@&quot;, [currentCar valueForKey: @&quot;speed&quot;]);
Â Â  Â 
//7.å¤„ç†æœªå®šä¹‰çš„å€¼
[currentCar setValue: [NSNumber numberWithFloat: 1500] forKey: @&quot;mileage&quot;];
[currentCar setValue: [NSNull null] forKey: @&quot;price&quot;];
[currentCar setValue: nil forKey: @&quot;capacity&quot;];
NSLog(@&quot;Mileage: %@ Price: %@, Capacity: %@&quot;, [currentCar valueForKey: @&quot;mileage&quot;], [currentCar valueForKey: @&quot;price&quot;], [currentCar valueForKey: @&quot;capacity&quot;]);

//8.KVCæœ‰è‡ªåŠ¨è£…ç®±çš„åŠŸèƒ½ï¼Œå½“ä½¿ç”¨valueForKeyæ—¶ï¼Œå®ƒè‡ªåŠ¨å°†æ ‡é‡å€¼ï¼ˆint,float,struct...ï¼‰æ”¾å…¥NSNumberæˆ–NSValueä¸­ï¼›å½“ä½¿ç”¨setValueForKeyï¼Œå®ƒè‡ªåŠ¨å°†æ ‡é‡å€¼ä»è¿™äº›å¯¹è±¡å–å‡ºã€‚

</code></pre>
<h2 id="kvoä»£ç å®ç°">KVOä»£ç å®ç°</h2>
<pre><code>//åº”è¯¥åœ¨ç›‘å¬è€…é‡Œæ·»åŠ ç›‘å¬ï¼Œè€Œä¸æ˜¯åœ¨è¢«ç›‘å¬è€…é‡Œæ·»åŠ ç›‘å¬
//åœ¨è¢«ç›‘å¬è€…æ·»åŠ ç›‘å¬ä¼šé€ æˆå¾ªç¯å¼•ç”¨çš„é—®é¢˜
car = [[Car alloc] init];
[car addObserver: self forKeyPath: @&quot;carPaint&quot; options: NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld context: nil];

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary&lt;NSString *,id&gt; *)change context:(void *)context {
Â  Â  if ([keyPath isEqualToString: @&quot;carPaint&quot;]) {
Â  Â  Â  Â  NSLog(@&quot;%@&quot;, [change objectForKey: @&quot;new&quot;]);Â  Â  //ä¿®æ”¹ä¹‹åçš„å€¼
Â  Â  Â  Â  self.showCarDetail.text = [NSString stringWithFormat: @&quot;è½¦çš„é¢œè‰²æ˜¯%@&quot;, [change objectForKey: @&quot;new&quot;]];
Â  Â  }
}

- (void)dealloc {
Â  Â  //ç›‘å¬è€…åº”è¯¥æ˜¯selfï¼Œè¢«ç›‘å¬è€…æ˜¯car
Â  Â  [car removeObserver: self forKeyPath: @&quot;carPaint&quot;];
}

</code></pre>
<h2 id="demoå±•ç¤ºbr">Demoå±•ç¤ºï¼š<br></h2>
<figure data-type="image" tabindex="1"><img src="http://jashion.b0.upaiyun.com/images/iOSObserving.gif" alt="Observer.gif" loading="lazy"></figure>
<p><a href="https://github.com/jashion/iOSObserving">Demoä¸‹è½½</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[iOSçš„å›¾ç‰‡æ¡†æ¶]]></title>
        <id>https://jashion.github.io/post/ios-de-tu-pian-kuang-jia/</id>
        <link href="https://jashion.github.io/post/ios-de-tu-pian-kuang-jia/">
        </link>
        <updated>2019-05-15T06:42:13.000Z</updated>
        <summary type="html"><![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2>
<p>ä»Šå¹´äº”æœˆä»½è¿›çš„æ–°å…¬å¸ï¼Œæ¥æ‰‹çš„ç¬¬ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œé‡Œé¢æˆ‘ä¸»è¦è´Ÿè´£å‘å¸–ï¼Œå…·ä½“æ˜¯å›¾æ–‡ï¼Œä¸åŒ…æ‹¬è§†é¢‘ã€‚ç”±äºæ—¶é—´ç´§æ€¥ï¼Œå¼€å‘æ—¶é—´åªæœ‰3å¤©ï¼Œå®é™…ä¸ŠåŒ…æ‹¬å¼€å‘ï¼Œæµ‹è¯•å’Œä¿®å¤BUGï¼Œç”¨äº†å·®ä¸å¤š3å‘¨çš„æ—¶é—´ï¼Œç¬¬ä¸€å‘¨å¼€å‘å®ŒæˆåŸºæœ¬åŠŸèƒ½ï¼Œåé¢ä¸¤å‘¨æµ‹è¯•å’Œä¿®å¤BUG,ç”±äºå½“æ—¶æ²¡æœ‰åšè¿‡ç›¸å†Œç›¸å…³çš„åŠŸèƒ½ï¼Œä¹Ÿå› ä¸ºæ—¶é—´ç´§æ€¥ï¼Œæ‰€ä»¥ï¼Œä½¿ç”¨äº†ä¸€ä¸ª<a href="https://github.com/zhuochenming/ImagePickerController">ç¬¬ä¸‰æ–¹çš„åº“</a>ï¼Œå¤§å®¶å¯ä»¥å»çœ‹ä¸€ä¸‹ï¼Œå†™çš„æ¯”è¾ƒå…¨é¢ã€‚åæ¥ï¼Œé¡¹ç›®å®Œæˆä¹‹åï¼Œç»ˆäºæœ‰æ—¶é—´ï¼Œé™ä¸‹å¿ƒæ…¢æ…¢ç ”ç©¶iOSçš„å›¾ç‰‡æ¡†æ¶äº†ï¼Œä¸ªäººå¯¹äºä¸æ‡‚çš„ä¸œè¥¿ï¼Œå¥½å¥‡å¿ƒå’Œæ±‚çŸ¥æ¬²è¿˜æ˜¯æ¯”è¾ƒå¼ºçš„ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2>
<p>ä»Šå¹´äº”æœˆä»½è¿›çš„æ–°å…¬å¸ï¼Œæ¥æ‰‹çš„ç¬¬ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œé‡Œé¢æˆ‘ä¸»è¦è´Ÿè´£å‘å¸–ï¼Œå…·ä½“æ˜¯å›¾æ–‡ï¼Œä¸åŒ…æ‹¬è§†é¢‘ã€‚ç”±äºæ—¶é—´ç´§æ€¥ï¼Œå¼€å‘æ—¶é—´åªæœ‰3å¤©ï¼Œå®é™…ä¸ŠåŒ…æ‹¬å¼€å‘ï¼Œæµ‹è¯•å’Œä¿®å¤BUGï¼Œç”¨äº†å·®ä¸å¤š3å‘¨çš„æ—¶é—´ï¼Œç¬¬ä¸€å‘¨å¼€å‘å®ŒæˆåŸºæœ¬åŠŸèƒ½ï¼Œåé¢ä¸¤å‘¨æµ‹è¯•å’Œä¿®å¤BUG,ç”±äºå½“æ—¶æ²¡æœ‰åšè¿‡ç›¸å†Œç›¸å…³çš„åŠŸèƒ½ï¼Œä¹Ÿå› ä¸ºæ—¶é—´ç´§æ€¥ï¼Œæ‰€ä»¥ï¼Œä½¿ç”¨äº†ä¸€ä¸ª<a href="https://github.com/zhuochenming/ImagePickerController">ç¬¬ä¸‰æ–¹çš„åº“</a>ï¼Œå¤§å®¶å¯ä»¥å»çœ‹ä¸€ä¸‹ï¼Œå†™çš„æ¯”è¾ƒå…¨é¢ã€‚åæ¥ï¼Œé¡¹ç›®å®Œæˆä¹‹åï¼Œç»ˆäºæœ‰æ—¶é—´ï¼Œé™ä¸‹å¿ƒæ…¢æ…¢ç ”ç©¶iOSçš„å›¾ç‰‡æ¡†æ¶äº†ï¼Œä¸ªäººå¯¹äºä¸æ‡‚çš„ä¸œè¥¿ï¼Œå¥½å¥‡å¿ƒå’Œæ±‚çŸ¥æ¬²è¿˜æ˜¯æ¯”è¾ƒå¼ºçš„ã€‚</p>
<!--more-->
<h2 id="ä¸€ios8ä»¥å‰çš„assetslibraryæ¡†æ¶">ä¸€.iOS8ä»¥å‰çš„AssetsLibraryæ¡†æ¶</h2>
<p>æˆ‘æ„Ÿè§‰ï¼ŒAssetsLibraryæ¡†æ¶è¿˜æ˜¯æ¯”è¾ƒå¥½ç”¨çš„ï¼Œä¸è¿‡iOS9ä»¥åå°±è¢«å¼ƒç”¨äº†ï¼Œä½¿ç”¨iOS8å‡ºæ¥çš„Photosæ¡†æ¶ï¼Œç›¸æ¯”äºAssetsLibraryæ›´ä¸ºå¼ºå¤§ï¼Œæ•ˆç‡æ›´é«˜ã€‚å…·ä½“çš„<a href="https://developer.apple.com/library/ios/documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/">æ–‡æ¡£</a>å¯ä»¥å»è‹¹æœå®˜æ–¹æµè§ˆï¼Œè¿™é‡Œåªè¯¦è¿°è‡ªå·±ç ”ç©¶çš„ä¸€äº›ä¸œè¥¿ã€‚<br>
AssetsLibraryæ¡†æ¶åªæœ‰6ä¸ªæ–‡ä»¶ï¼Œéå¸¸ç®€æ´ï¼š</p>
<pre><code>//è¯¥æ–‡ä»¶ä¸»è¦ä½œç”¨æ˜¯å¼•è¿›å¤´æ–‡ä»¶
AssetsLibrary.h 

//æ‰€æœ‰ç…§ç‰‡å’Œè§†é¢‘çš„é›†åˆ
ALAssetsLibrary.h  

//ä»£è¡¨ä¸€å¼ å›¾ç‰‡æˆ–è€…ä¸€ä¸ªè§†é¢‘çš„å…ƒæ•°æ®
ALAsset.h  

//ä»£è¡¨ALAssetå¯¹è±¡åŒ…å«çš„ä¸€äº›æ•°æ®ï¼Œæ¯”å¦‚ï¼šurlï¼Œfilenameç­‰ç­‰ã€‚
ALAssetRepresentation.h

//è¿‡æ»¤å™¨ï¼š1.å›¾ç‰‡ 2.è§†é¢‘ 3.å…¨éƒ¨
ALAssetsFilter.h

//assetsçš„é›†åˆï¼Œæ¯”å¦‚ï¼šç›¸å†Œ
ALAssetsGroup.h
</code></pre>
<p>ä¸‹é¢è®²è§£ä¸»è¦ç”¨åˆ°çš„ä¸€äº›æ“ä½œï¼š</p>
<h3 id="1iphoneæ‰‹æœºåœ¨è·å–æœ¬åœ°ç›¸å†Œå’Œè§†é¢‘çš„æ—¶å€™éœ€è¦å¾—åˆ°æœ¬äººçš„è®¸å¯è®¤è¯æ‰€ä»¥ç¬¬ä¸€æ­¥æ˜¯è·å–åˆ¤æ–­è®¤è¯çŠ¶æ€">1.iPhoneæ‰‹æœºåœ¨è·å–æœ¬åœ°ç›¸å†Œå’Œè§†é¢‘çš„æ—¶å€™ï¼Œéœ€è¦å¾—åˆ°æœ¬äººçš„è®¸å¯è®¤è¯ï¼Œæ‰€ä»¥ï¼Œç¬¬ä¸€æ­¥æ˜¯è·å–åˆ¤æ–­ï¼Œè®¤è¯çŠ¶æ€ã€‚</h3>
<pre><code>//ALAuthorizationStatusNotDetermined  //ç”¨æˆ·è¿˜æ²¡åšå‡ºé€‰æ‹©
//ALAuthorizationStatusRestricted  	  //ç”¨æˆ·å—åˆ°æŸäº›é™åˆ¶ï¼Œä¸èƒ½è‡ªå·±å†³å®šï¼Œæ¯”å¦‚ï¼šå®¶é•¿æ§åˆ¶
//ALAuthorizationStatusDenied	      //ç”¨æˆ·æ˜ç¡®å¦å†³
//ALAuthorizationStatusAuthorized     //ç”¨æˆ·è®¤è¯é€šè¿‡

[ALAssetsLibrary authorizationStatus] == ALAuthorizationStatusAuthorized
//åˆ¤æ–­çŠ¶æ€æ˜¯å¦æ˜¯å‡†è®¸ï¼Œå¦‚æœå…è®¸åˆ™å¯ä»¥è·å–æœ¬åœ°ç›¸å†Œï¼Œå¦åˆ™ï¼Œä¸èƒ½è·å–ï¼Œåˆ™å¯ä»¥æç¤ºéœ€è¦ç”¨æˆ·åšä»€ä¹ˆæ“ä½œæ‰èƒ½æ‰“å¼€æœ¬åœ°ç›¸å†Œ
</code></pre>
<h3 id="2è·å–æœ¬åœ°ç›¸å†Œä»¥åŠç›¸å†Œç›¸å…³çš„ä¸€äº›ä¿¡æ¯æ¯”å¦‚ç¼©ç•¥å›¾ç›¸å†Œåç§°ç­‰ç­‰">2.è·å–æœ¬åœ°ç›¸å†Œï¼Œä»¥åŠç›¸å†Œç›¸å…³çš„ä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼šç¼©ç•¥å›¾ï¼Œç›¸å†Œåç§°ç­‰ç­‰ã€‚</h3>
<pre><code>//1.è·å–ç›¸å†Œ
@property (nonatomic, strong) ALAssetsLibrary *assetsLibrary;  //ALAssetsLibraryå®ä¾‹å¿…é¡»è¢«controllerå¼ºå¼•ç”¨æˆ–è€…æ˜¯å®ä¾‹å˜é‡ï¼Œä¸ç„¶ä¼šæŠ¥é”™

[self.assetsLibrary enumerateGroupsWithTypes: ALAssetsGroupAll usingBlock:^(ALAssetsGroup *group, BOOL *stop) {
    ALAssetsFilter *onlyPhotosFilter = [ALAssetsFilter allPhotos];  //è¿‡æ»¤å™¨ï¼Œåªè·å–å›¾ç‰‡
    [group setAssetsFilter: onlyPhotosFilter];
            
    if ([group numberOfAssets] &gt; 0) {    //å½“groupï¼nilæ˜¯å°±æ˜¯éå†å®Œå…¨éƒ¨ç›¸å†Œ
        [albumsArray addObject: [self modelWithAssetResult: group name: [group valueForProperty: ALAssetsGroupPropertyName]]];
    } else {
        completion(albumsArray);
    }
    //*stop=NO(åœæ­¢éå†ç…§ç‰‡æ•°ç»„)
} failureBlock:^(NSError *error) {
    NSString *errorMessage = nil;
    switch ([error code]) {    //é”™è¯¯ä»£ç çš„å¤„ç†
        case ALAssetsLibraryAccessUserDeniedError:
        case ALAssetsLibraryAccessGloballyDeniedError:
             errorMessage = @&quot;The user has declined access to it.&quot;;
             break;
                    
        default:
             errorMessage = @&quot;Reason unknow.&quot;;
             break;
        }
        NSLog(@&quot;%@&quot;, errorMessage);
}];


//è¯´ä¸€ä¸‹Group Type
ALAssetsGroupSavedPhotos  //Camera Roll
ALAssetsGroupPhotoStream  //My Photo Stream
ALAssetsGroupAll				//All  available group
//å‰©ä¸‹çš„ç±»å‹å¯ä»¥å»çœ‹æ–‡æ¡£


//2.è·å–ç›¸å†Œçš„ç¼©ç•¥å›¾
ALAssetsGroup *group = (ALAssetsGroup *)model.assetResult;
CGImageRef posterImageRef = [group posterImage];
UIImage *posterImage = [UIImage imageWithCGImage: posterImageRef];

//3.éå†ç›¸å†Œè·å–æ¯ä¸€ä¸ªç›¸ç‰‡æˆ–è€…è§†é¢‘çš„asset
//æœ‰3ä¸ªéå†ç›¸å†Œçš„æ–¹æ³•ï¼Œå…¶ä¸­Resultä»£è¡¨ä¸€å¼ ç…§ç‰‡æˆ–è€…ä¸€ä¸ªè§†é¢‘ï¼Œstopæ˜¯åœæ­¢éå†çš„æ ‡è¯†ï¼Œé»˜è®¤ä¸ºNOï¼Œå¦‚æœstop=YESï¼Œåˆ™åœæ­¢ä¸‹ä¸€æ¬¡çš„éå†

//(1).é¡ºåºéå†ï¼ŒåŒæ­¥éå†
[self.albumGroup enumerateAssetsUsingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop) {
    if (result) {
        [self.albumPhotos addObject: result];
    }
}];

//(2).å¹¶å‘éå†æˆ–è€…é€†åºéå†
//NSEnumerationConcurrent: å¹¶å‘ä¸ä¿è¯é¡ºåº
//NSEnumerationReverse: é€†åºéå†
[self.albumGroup enumerateAssetsWithOptions: NSEnumerationConcurrent usingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop) {
    if (result) {
        [self.albumPhotos addObject: result];
    }
}];


//(3).å¯é€‰æ‹©éå†çš„ä½ç½®å’Œå¹¶å‘æˆ–è€…é€†åºéå†
//è·å–0ï½9ä¸‹æ ‡çš„ç…§ç‰‡
NSRange range = {0, 10};
[self.albumGroup enumerateAssetsAtIndexes: [NSIndexSet indexSetWithIndexesInRange: range] options: NSEnumerationConcurrent usingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop) {
    if (result) {
        [self.albumPhotos addObject: result];
    }
}];

//è·å–ä¸‹æ ‡ä¸º10çš„ç…§ç‰‡
NSIndexSet *indexSet = [NSIndexSet indexSetWithIndex: 9];
[self.albumGroup enumerateAssetsAtIndexes: indexSet options: NSEnumerationConcurrent usingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop) {
    if (result) {
        [self.albumPhotos addObject: result];
    }
}];

//4.è·å–ç…§ç‰‡çš„ç¼©ç•¥å›¾
ALAsset *asset = self.albumPhotos[indexPath.row];
CGImageRef thumdnailImageRef = [asset thumbnail];  //[asset aspectRatioThumbnail]

//5.è·å–ç…§ç‰‡
ALAsset *photoAsset = (ALAsset *)asset;
ALAssetRepresentation *assetRepresentation = [photoAsset defaultRepresentation];    //ALAssetRepresentationè·å–assetçš„ä¸€äº›ç›¸å…³çš„å‚æ•°ï¼Œä¸€ä¸ªassetå¯ä»¥æ‹¥æœ‰å¤šä¸ªALAssetRepresentation
CGImageRef photoRef = [assetRepresentation fullScreenImage];    //fullScreenImageå…¨å±ç…§ç‰‡ï¼ŒåŒ…å«ç¼–è¾‘è¿‡çš„ä¿¡æ¯ï¼Œæ˜¯ä¸€å¼ ç¼©ç•¥å›¾ï¼›
CGImageRef photoRef = [assetRepresentation fullResolutionImage]    //fullResolutionImageå›¾ç‰‡åŸå›¾ï¼Œä¸åŒ…å«ç¼–è¾‘è¿‡çš„ä¿¡æ¯ï¼Œæ˜¯ä¸€å¼ é«˜æ¸…å›¾ï¼ŒåŠ è½½æ¯”è¾ƒæ…¢
//- (CGImageRef)CGImageWithOptions:(NSDictionary *)options  æ ¹æ®å‚æ•°è·å–å›¾ç‰‡ï¼Œå½“options=nilåˆ™å’ŒfullResolutiongImageç­‰åŒ

//å¦‚æœæ˜¯fullScreenImageï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢ä¸¤ç§æ–¹æ³•è·å–å›¾ç‰‡ï¼Œä½†å»ºè®®ä½¿ç”¨ç¬¬äºŒç§ï¼Œå› ä¸ºæœ‰äº›ç…§ç‰‡æœ‰æ—‹è½¬æ–¹å‘é—®é¢˜ï¼Œæ—‹è½¬æ–¹å‘é€‰æ‹©é»˜è®¤UIImageOrientationUpç±»å‹å°±å¥½
//å¦‚æœæ˜¯fullResolutionImageï¼Œæ—‹è½¬æ–¹å‘ä½¿ç”¨assetRepresentation.orientationï¼Œåˆ™æ˜¾ç¤ºå‡ºæ¥çš„å›¾ç‰‡å°±ä¸ä¼šæœ‰æ—‹è½¬æ–¹å‘é—®é¢˜
UIImage *resultImage = [UIImage imageWithCGImage: photoRef];
UIImage *resultImage = [UIImage imageWithCGImage: photoRef
                                           scale: [assetRepresentation scale]
                                     orientation: UIImageOrientationUp];
                                     


//6.å…¶å®ƒæ–¹æ³•
//åˆ›å»ºç›¸å†Œ
- (void)addAssetsGroupAlbumWithName:(NSString *)name resultBlock:(ALAssetsLibraryGroupResultBlock)resultBlock failureBlock:(ALAssetsLibraryAccessFailureBlock)failureBlockï¼›

//ä¿å­˜ç…§ç‰‡æˆ–è§†é¢‘åˆ°ç›¸å†Œ(ä¿å­˜åœ¨Camera Rollå’ŒMy Photo Stream)
- (void)writeImageToSavedPhotosAlbum:(CGImageRef)imageRef orientation:(ALAssetOrientation)orientation completionBlock:(ALAssetsLibraryWriteImageCompletionBlock)completionBlock 
- (void)writeImageToSavedPhotosAlbum:(CGImageRef)imageRef metadata:(NSDictionary *)metadata completionBlock:(ALAssetsLibraryWriteImageCompletionBlock)completionBlock 
- (void)writeImageDataToSavedPhotosAlbum:(NSData *)imageData metadata:(NSDictionary *)metadata completionBlock:(ALAssetsLibraryWriteImageCompletionBlock)completionBlock 

- (void)writeVideoAtPathToSavedPhotosAlbum:(NSURL *)videoPathURL completionBlock:(ALAssetsLibraryWriteVideoCompletionBlock)completionBlock

//ç›¸å†Œå†…å®¹æ”¹å˜çš„é€šçŸ¥
ALAssetsLibraryChangedNotification

//æ·»åŠ åˆ°ç›¸åº”çš„ç›¸å†Œï¼Œå¯ä»¥åœ¨è·å–è¯¥ç›¸å†Œçš„ALAssetsGroupï¼Œè°ƒç”¨addAssetæ–¹æ³•
- (BOOL)addAsset:(ALAsset *)asset    //ä¸è¿‡æ²¡æœ‰æ‰¾åˆ°å°†ä¸€å¼ å›¾ç‰‡å˜æˆassetçš„æ–¹æ³•ï¼Œåªèƒ½å…ˆä¿å­˜åœ¨Camera Roll/My Photo Streamç„¶åè·å¾—è¯¥å›¾ç‰‡çš„assetå†ä¿å­˜åœ¨ç‰¹å®šçš„ç›¸å†Œï¼Œä¸è¿‡ç”±äºæ˜¯åŒä¸€ä¸ªassetï¼Œæ‰€ä»¥ï¼Œä¸€æ—¦åˆ é™¤ä¸€ä¸ªï¼Œæ‰€æœ‰ç›¸å†Œä¸­çš„è¿™å¼ å›¾ç‰‡éƒ½ä¼šè¢«åˆ é™¤

</code></pre>
<h3 id="3æ®è¯´æ˜¯ä¸€äº›å‘ç‚¹">3.æ®è¯´æ˜¯ä¸€äº›å‘ç‚¹</h3>
<ul>
<li>
<p>ALAssetsLibraryå®ä¾‹å¿…é¡»è¢«controllerå¼ºå¼•ç”¨æˆ–è€…æ˜¯å®ä¾‹å˜é‡ï¼Œä¸ç„¶ä¼šæŠ¥é”™ã€‚(å·²äº²è‡ªè¯•éªŒï¼Œä¼šæŠ¥é”™ã€‚)</p>
</li>
<li>
<p>AssetsLibrary éµå¾ªå†™å…¥ä¼˜å…ˆåŸåˆ™ã€‚(<a href="http://kayosite.com/ios-development-and-detail-of-photo-framework.html">åŸå¸–å‡ºå¤„</a>ï¼Œæ²¡æœ‰è¯•éªŒè¿‡ã€‚)<br>
AssetsLibrary è¯»å–èµ„æºçš„è¿‡ç¨‹ä¸­ï¼Œæœ‰ä»»ä½•å…¶å®ƒçš„è¿›ç¨‹ï¼ˆä¸ä¸€å®šæ˜¯åŒä¸€ä¸ª Appï¼‰åœ¨ä¿å­˜èµ„æºæ—¶ï¼Œå°±ä¼šæ”¶åˆ° ALAssetsLibraryChangedNotificationï¼Œè®©ç”¨æˆ·è‡ªè¡Œä¸­æ–­è¯»å–æ“ä½œã€‚æœ€å¸¸è§çš„å°±æ˜¯è¯»å– fullResolutionImage æ—¶ï¼Œè¿™æ—¶å€™å†åœ¨åˆ«çš„è¿›ç¨‹å†™å…¥ï¼Œç”±äºè¯»å– fullResolutionImage è€—æ—¶è¾ƒé•¿ï¼Œå¾ˆå®¹æ˜“å°±ä¼š exceptionã€‚</p>
</li>
<li>
<p>å¼€å¯ Photo Stream å®¹æ˜“å¯¼è‡´ exceptionã€‚(<a href="http://kayosite.com/ios-development-and-detail-of-photo-framework.html">åŸå¸–å‡ºå¤„</a>ï¼Œæ²¡æœ‰è¯•éªŒè¿‡ã€‚)<br>
å¦‚æœç”¨æˆ·å¼€å¯äº†å…±äº«ç…§ç‰‡æµï¼ˆPhoto Streamï¼‰ï¼Œå…±äº«ç…§ç‰‡æµä¼šä»¥ mstreamd çš„æ–¹å¼â€œå·å·â€æ‰§è¡Œï¼Œå½“æœ‰äººæŠŠç›¸ç‰‡å†™å…¥ Camera Roll æ—¶ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨ä¿å­˜åˆ° Photo Stream Album ä¸­ï¼Œå¦‚æœç”¨æˆ·åˆšå¥½åœ¨è¯»å–ï¼Œé‚£å°±è·Ÿä¸Šé¢è¯´çš„ä¸€æ ·äº§ç”Ÿ exception äº†ã€‚ç”±äºå…±äº«ç…§ç‰‡æµæ˜¯ç”¨æˆ·å†³å®šæ˜¯å¦è¦å¼€å¯çš„ï¼Œæ‰€ä»¥å¼€å‘è€…æ— æ³•æ”¹å˜ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ¥å£åœ¨éœ€è¦ä¿æŠ¤çš„æ—¶åˆ»å…³é—­ç›‘å¬å…±äº«ç…§ç‰‡æµäº§ç”Ÿçš„é¢‘ç¹é€šçŸ¥ä¿¡æ¯ã€‚<br>
ä¿æŠ¤æªæ–½ï¼š</p>
<pre><code>[ALAssetsLibrary disableSharedPhotoStreamsSupport];  //ç¦æ­¢å›¾ç‰‡å…±äº«
</code></pre>
</li>
</ul>
<h2 id="äºŒios8ä»¥åä½¿ç”¨æ›´ä¸ºå¼ºå¤§çš„photosæ¡†æ¶">äºŒ.iOS8ä»¥åï¼Œä½¿ç”¨æ›´ä¸ºå¼ºå¤§çš„Photosæ¡†æ¶</h2>
<p>Photosæ¡†æ¶åŒ…æ‹¬ä¸¤ä¸ªåº“Photoså’ŒPhotoUIï¼Œè€ŒPhotoUIä¸»è¦æ˜¯ç”¨æ¥æ˜¾ç¤ºiOS9æ–°å¢çš„Photoç±»å‹ï¼ŒLivePhotoè¯´ç™½äº†å°±æ˜¯è‹¹æœæ–°å¢çš„GIF,ä¸è¿‡åªèƒ½åœ¨iphone6ä»¥åå‘å¸ƒçš„æœºå‹æ‹æ‘„LivePhotoï¼Œä¸‹é¢ä¹Ÿä¼šä»‹ç»åˆ°è¿™ä¸ªæ–°çš„å›¾ç‰‡ç±»å‹ã€‚Let's begin!<br>
Photosåº“æ¯”ALAssetLibraryåº“å¤æ‚å¾ˆå¤šï¼Œç›¸å¯¹çš„ï¼ŒåŠŸèƒ½å¼ºå¤§å¾ˆå¤šï¼Œä¸‹é¢ç®€è¿°ä¸€ä¸‹å„ä¸ªæ–‡ä»¶çš„ä½œç”¨ï¼š</p>
<h4 id="tips-å‡çº§ios10ä¹‹åéœ€è¦æŠŠåœ¨plistæ–‡ä»¶ä¸­æ·»åŠ æ‰€ç”¨çš„éšç§æƒé™æ¯”å¦‚æœ¬åº”ç”¨è·å–ç›¸æœºæƒé™è·å–æœ¬åœ°ç›¸å†Œæƒé™è·å–æœ¬åœ°è§†é¢‘æƒé™ç­‰ç­‰ä¸ç„¶åcrashæ‰æ²¡å¾—å•†é‡è‹¹æœä¾ç„¶éœ¸é“å¦‚åˆ">Tips: å‡çº§iOS10ä¹‹åï¼Œéœ€è¦æŠŠåœ¨plistæ–‡ä»¶ä¸­æ·»åŠ æ‰€ç”¨çš„éšç§æƒé™ï¼Œæ¯”å¦‚æœ¬åº”ç”¨ï¼šè·å–ç›¸æœºæƒé™ï¼Œè·å–æœ¬åœ°ç›¸å†Œæƒé™ï¼Œè·å–æœ¬åœ°è§†é¢‘æƒé™ç­‰ç­‰ï¼Œä¸ç„¶åCrashæ‰ï¼Œæ²¡å¾—å•†é‡ï¼Œè‹¹æœä¾ç„¶éœ¸é“å¦‚åˆã€‚</h4>
<h3 id="1interacting-with-the-photos-libraryä¸photosåº“çš„äº¤äº’">1.Interacting with the Photos Library(ä¸Photosåº“çš„äº¤äº’)</h3>
<pre><code>PHPhotoLibrary
\\è·å–ç³»ç»Ÿç›¸å†Œæˆæƒä»¥åŠç›‘å¬ç³»ç»Ÿç›¸å†Œçš„å˜åŒ–ï¼ŒåŒ…æ‹¬åˆ›å»ºï¼Œåˆ é™¤å’Œç¼–è¾‘
\\ç”±äºPHAsset,PHAssetCollectionå’ŒPHCollectionListæ˜¯ä¸å¯å˜å¯¹è±¡
\\æ‰€ä»¥ï¼Œç³»ç»Ÿåœ¨è¯¥æ–‡ä»¶æä¾›äº†ä¸€ä¸ªä¿®æ”¹ç³»ç»Ÿç›¸å†Œèµ„æºçš„Block
</code></pre>
<h3 id="2retrieving-and-examining-assetsæ£€ç´¢è·å–å’Œå®¡æŸ¥assets">2.Retrieving and Examining Assets(æ£€ç´¢ï¼Œè·å–å’Œå®¡æŸ¥Assets)</h3>
<pre><code>PHAsset
\\ä»£è¡¨ç³»ç»Ÿçš„ä¸€ä¸ªå›¾ç‰‡ï¼Œè§†é¢‘æˆ–è€…Live Photo

PHAssetCollection
\\ä»£è¡¨ä¸€ç»„Photos assetï¼Œæ¯”å¦‚ï¼šç³»ç»Ÿç›¸å†Œé‡Œçš„æ—¶åˆ»ä¸€ä¸ªåˆ†ç±»ï¼Œç”¨æˆ·åˆ›å»ºçš„ç›¸å†Œæˆ–è€…æ™ºèƒ½ç›¸å†Œ

PHCollectionList
\\ä»£è¡¨ä¸€ç»„åŒ…å«ä¸€ä¸ªæˆ–è€…å¤šä¸ªPhotos asset collectionï¼Œæ¯”å¦‚ï¼šæ—¶åˆ»é‡Œçš„å¹´æˆ–è€…åŒ…å«ç”¨æˆ·åˆ›å»ºçš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªç›¸å†Œ

PHCollection
\\ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæ˜¯PHAssetCollectionå’ŒPHColletionListçš„çˆ¶ç±»

PHObject
\\Photos model objects(assetså’Œcollections)çš„æŠ½è±¡ç±»

PHFetchResult
\\åŒ…å«assetsæˆ–è€…collectionsæœ‰åºçš„ä¸€ç³»åˆ—é›†åˆ

PHFetchOptions
\\optionçš„é›†åˆï¼Œå…³äºè¿‡æ»¤ï¼Œæ’åºå’Œç®¡ç†Photos
</code></pre>
<h3 id="3loading-asset-content">3.Loading Asset Content</h3>
<pre><code>PHImageManager
\\æä¾›è·å–æˆ–ç”Ÿæˆé¢„è§ˆçš„ç¼©ç•¥å›¾å’ŒåŸå›¾æˆ–è€…è§†é¢‘çš„æ•°æ®

PHCachingImageManager
\\æä¾›è·å–æˆ–ç”Ÿæˆé¢„è§ˆçš„ç¼©ç•¥å›¾å’ŒåŸå›¾æˆ–è€…è§†é¢‘çš„æ•°æ®
\\å’ŒPHImageManagerä¸åŒä¹‹å¤„åœ¨äºå¯ä»¥ç¼“å­˜å›¾ç‰‡ï¼Œå¹¶ä¸”å¦‚æœæœ‰ç¼“å­˜åˆ™ç›´æ¥ä»ç¼“å­˜å–æ•°æ®

PHImageRequestQptions
\\è·å–å›¾ç‰‡çš„ä¸€äº›å‚æ•°è®¾ç½®

PHVideoRequestOptions
\\è·å–è§†é¢‘çš„ä¸€äº›å‚æ•°è®¾ç½®

PHLivePhotoRequestOptions
\\è·å–Live Photoçš„ä¸€äº›å‚æ•°è®¾ç½®

PHLivePhoto
\\å±•ç¤ºLive Photo(åŒ…å«åŠ¨ä½œå’Œå£°éŸ³çš„å›¾ç‰‡é›†åˆï¼Œå’ŒGIFå·®ä¸å¤š)
</code></pre>
<h3 id="4requesting-changes">4.Requesting Changes</h3>
<pre><code>PHAssetChangeRequest
\\åœ¨photo library change blocké‡Œåˆ›å»ºï¼Œåˆ é™¤ï¼Œä¿®æ”¹metadataæˆ–è€…ç¼–è¾‘Photos assetçš„å†…å®¹çš„request

PHAssetCollectionChangeRequest
\\åœ¨photo library change blocké‡Œåˆ›å»ºï¼Œåˆ é™¤æˆ–è€…ä¿®æ”¹Photos asset collectionçš„request

PHCollectionListChangeRequest
\\åœ¨photo library change blocké‡Œåˆ›å»ºï¼Œåˆ é™¤æˆ–è€…ä¿®æ”¹Photos collection listçš„request

PHObjectPlaceholder
\\Photos assetå’ŒPhoto collectionçš„å”¯ä¸€èµ„æºå ä½ç¬¦
</code></pre>
<h3 id="5editing-asset-content">5.Editing Asset Content</h3>
<pre><code>PHContentEditingInput
\\ä¸€ä¸ªæä¾›ç¼–è¾‘èµ„æº(image,video,Live Photo)ä¿¡æ¯çš„å®¹å™¨

PHContentEditingOutput
\\ä¸€ä¸ªåŒ…å«ç¼–è¾‘èµ„æº(image,video,Live Photo)ç»“æœçš„å®¹å™¨

PHAdjustmentData
\\åŒ…å«ç¼–è¾‘èµ„æºçš„æè¿°ï¼Œå¯ä»¥å…è®¸æ¢å¤ç¼–è¾‘ä¹‹å‰çš„çŠ¶æ€

PHContentEditingInputRequestOptions
\\ç¼–è¾‘èµ„æºçš„options

PHLivePhotoEditingContext
\\Live Photoç¼–è¾‘çš„ç¯å¢ƒ

PHLivePhotoFrame
\\ä¸€ä¸ªLive Photoçš„frame

</code></pre>
<h3 id="6observing-changesç›‘å¬ç³»ç»Ÿç›¸å†Œèµ„æºçš„æ”¹å˜">6.Observing Changes(ç›‘å¬ç³»ç»Ÿç›¸å†Œèµ„æºçš„æ”¹å˜)</h3>
<pre><code>PHPhotoLibraryChangeObserver
\\ç›‘å¬åè®®

PHChange
\\Photos libraryæ”¹å˜çš„æè¿°

PHObjectChangeDetails
\\assetæˆ–è€…collectionå¯¹è±¡æ”¹å˜çš„æè¿°

PHFetchResultChangeDetails
\\ä¸€ç³»åˆ—assetæˆ–è€…collectionå¯¹è±¡æ”¹å˜çš„æè¿°

</code></pre>
<h3 id="7working-with-asset-resources">7.Working with Asset Resources</h3>
<pre><code>PHAssetResource
\\å›¾ç‰‡ï¼Œè§†é¢‘å’ŒLive Photoåœ¨Photos libraryé‡Œçš„åŸºç¡€æ•°æ®

PHAssetCreationRequest
\\ä½¿ç”¨åŸºç¡€æ•°æ®åˆ›å»ºæ–°çš„Photos asset

PHAssetResourceCreationOptions
\\ä½¿ç”¨åŸºç¡€æ•°æ®åˆ›å»ºæ–°çš„Photos assetçš„ä¸€äº›è®¾ç½®

PHAssetResourceManager
\\æä¾›å…³äºPhotos assetåŸºç¡€æ•°æ®çš„å‚¨å­˜æ–¹æ³•

PHAssetResourceRequestOptions
\\è·å–åŸºç¡€æ•°æ®çš„ä¸€äº›è®¾ç½®

</code></pre>
<h3 id="8media-types-and-subtypes">8.Media Types and Subtypes</h3>
<pre><code>PHAssetMediaType
\\åª’ä½“ç±»å‹ï¼Œæ¯”å¦‚ï¼šå›¾ç‰‡ï¼Œè§†é¢‘ï¼ŒLivePhoto

PHAssetMediaSubtype
\\asset mediaï¼Œæ¯”å¦‚ï¼šå…¨æ™¯ç…§ç‰‡ï¼Œæˆªå±ï¼Œå»¶æ—¶æ‹æ‘„ï¼Œæ…¢åŠ¨ä½œç­‰ç­‰

</code></pre>
<h3 id="9structures">9.Structures</h3>
<pre><code>PHAssetBurstSelectionType
PHAssetSourceType
PHLivePhotoEditingOption
</code></pre>
<h3 id="10other-reference">10.Other Reference</h3>
<pre><code>Photos Constants
Photos Enumerations
Photos Data Types
</code></pre>
<h3 id="11ä¸‹é¢ä»‹ç»å’ŒåŠŸèƒ½ç›¸å…³çš„å®ç°ä»£ç ">11.ä¸‹é¢ä»‹ç»å’ŒåŠŸèƒ½ç›¸å…³çš„å®ç°ä»£ç </h3>
<pre><code>1.é¦–å…ˆè·å–ç”¨æˆ·æƒé™
[PHPhotoLibrary authorizationStatus] == PHAuthorizationStatusAuthorized
//åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å…è®¸è·å–æœ¬åœ°ç›¸å†Œ
//å’ŒALAsslibraryè¿”å›çš„çŠ¶æ€ä¸€è‡´ï¼Œå…·ä½“å¯ä»¥åˆ°PHPhotoLibraryå¤´æ–‡ä»¶å»æŸ¥çœ‹

2.è·å–æœ¬åœ°ç›¸å†Œé›†åˆ
//ç›¸å†Œï¼Œåœ¨è¿™é‡ŒæŠ½è±¡æˆäº†æ–‡ä»¶å¤¹çš„æ¦‚å¿µï¼Œä½¿ç”¨PHAssetCollectionæ¥è¡¨ç¤º
//æ—¶åˆ»ä½¿ç”¨PHCollectionListæ¥è¡¨ç¤º
//PHCollectionæ—¢å¯ä»¥è¡¨ç¤ºä¸€ä¸ªç›¸å†Œæˆ–è€…ä¸€ä¸ªæ—¶åˆ»ï¼Œå¯ä»¥è¡¨ç¤ºå¤šä¸ªç›¸å†Œçš„é›†åˆä»¥åŠé›†åˆé‡Œé¢è¿˜å¯ä»¥åµŒå¥—æ–‡ä»¶å¤¹
//è·å–ç›¸å†Œæœ‰å…³çš„å‡½æ•°éƒ½åœ¨PHCollectionå¤´æ–‡ä»¶é‡Œé¢ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å»çœ‹ä¸€ä¸‹
//è¿™é‡Œåªç”¨åˆ°çš„ç›¸å†Œéƒ¨åˆ†

//è·å–èŒèƒ½ç›¸å†Œï¼Œå³ç³»ç»Ÿåˆ›å»ºçš„ç›¸å†Œ
PHFetchResult *smartAlbums = [PHAssetCollection fetchAssetCollectionsWithType: PHAssetCollectionTypeSmartAlbum subtype: PHAssetCollectionSubtypeAlbumRegular options: nil];

//è·å–ç”¨æˆ·ç›¸å†Œï¼Œå³ç”¨æˆ·åˆ›å»ºçš„ç›¸å†Œï¼ŒåŒ…æ‹¬ç”¨æˆ·è‡ªå·±åˆ›å»ºå’ŒAppåˆ›å»ºçš„ç›¸å†Œ
PHFetchResult *albums = [PHAssetCollection fetchAssetCollectionsWithType: PHAssetCollectionTypeAlbum subtype: PHAssetCollectionSubtypeAlbumRegular | PHAssetCollectionSubtypeAlbumMyPhotoStream options: nil];

//PHAssetCollectionTypeæœ‰ä¸‰ç§ç±»å‹ï¼š
//PHAssetCollectionTypeAlbumç›¸å†Œï¼ˆç”¨æˆ·ï¼‰ï¼ŒPHAssetCollectionTypeSmartAlbumæ™ºèƒ½ç›¸å†Œï¼ˆç³»ç»Ÿï¼‰ï¼ŒPHAssetCollectionTypeMomentæ—¶åˆ»
//PHAssetCollectionSubTypeæœ‰å¾ˆå¤šç±»å‹ï¼Œæ¯”å¦‚ï¼šè§†é¢‘ï¼Œå…¨æ™¯ç…§ç‰‡ï¼Œè‡ªæ‹ç­‰ç­‰ï¼Œå…·ä½“ä»€ä¹ˆç±»å‹ä»£è¡¨å“ªä¸ªç›¸å†Œï¼Œæœ‰å…´è¶£çš„è‡ªè¡Œå»æŸ¥çœ‹

3.è·å–ç›¸å†Œé‡Œé¢çš„èµ„æºï¼ŒåŒ…æ‹¬ç…§ç‰‡å’Œè§†é¢‘
//ä¸€å¼ å›¾ç‰‡å’Œä¸€ä¸ªè§†é¢‘éƒ½æ˜¯ä½¿ç”¨PHAssetæ¥è¡¨ç¤º

//optioné€‰æ‹©è¿‡æ»¤
PHFetchOptions *option = [[PHFetchOptions alloc] init];
if (!allowPickingVideo) {
	option.predicate = [NSPredicate predicateWithFormat: @&quot;mediaType == %ld&quot;, PHAssetMediaTypeImage];    //è¿‡æ»¤æ‰è§†é¢‘
}
option.sortDescriptors = @[[NSSortDescriptor sortDescriptorWithKey: @&quot;creationDate&quot; ascending: YES]];    //æŒ‰ç…§åˆ›å»ºæ—¶é—´å‡åº
PHFetchResult *fetchResult = [PHAsset fetchAssetsInAssetCollection: albumCollection options: option];
PHFetchResult *allPhotos = [PHAsset fetchAssetsWithOptions: option];    //è·å–æ‰€æœ‰èµ„æº

4.è·å–ç…§ç‰‡ï¼ŒLivePhotoæˆ–è€…è§†é¢‘
//Notice: LivePhotoä¹Ÿæ˜¯å±äºå›¾ç‰‡ç±»å‹

//è·å–å›¾ç‰‡éœ€è¦æŒ‡å®šå¤§å°
//å¦‚æœæŒ‡å®šçš„å¤§å°çš„é«˜å®½æ¯”å’Œå›¾ç‰‡çš„é«˜å®½æ¯”ä¸ä¸€è‡´ï¼Œåˆ™contentModeå†³å®šè¿”å›å›¾ç‰‡çš„å°ºå¯¸
//contentModeæœ‰ä¸‰ç§ç±»å‹ï¼š
//PHImageContentModeAspectFitï¼ˆç­‰æ¯”ä¾‹é€‚åº”ï¼‰ï¼ŒPHImageContentModeAspectFillï¼ˆç­‰æ¯”ä¾‹ç¼©æ”¾é€‚åº”ï¼‰ï¼Œ
PHImageContentModeDefaultï¼ˆé»˜è®¤ï¼Œç›¸å½“äºç¬¬ä¸€ç§ï¼‰
//å¯ä»¥è®¾ç½®ä¸ºPHImageManagerMaximumSizeå¤§å°ï¼Œè·å–åŸå›¾æˆ–è€…æœ€å¤§çš„å›¾ç‰‡å°ºå¯¸ï¼Œä½†æ˜¯ä¼šå¿½ç•¥optioné‡Œé¢çš„resizeModeçš„è®¾ç½®
//optionç›¸å…³é€‰æ‹©è¿‡æ»¤è®¾ç½®ï¼Œæ¯”è¾ƒé‡è¦çš„å¦‚ä¸‹
//PHImageRequestOptionsDeliveryModeå†³å®šè¿”å›çš„å›¾ç‰‡è´¨é‡
//networkAccessAllowedé»˜è®¤ä¸ºNOï¼Œè®¾ä¸ºYESåˆ™å¯ä»¥é€šè¿‡ç½‘ç»œä»iClouldä¸‹è½½å›¾ç‰‡
//synchronousæ˜¯å¦ä¸ºåŒæ­¥æ“ä½œï¼Œé»˜è®¤ä¸ºNOï¼Œå¦‚æœè®¾ç½®ä¸ºYESåˆ™ï¼Œç›¸å…³æ¨¡å¼ä¸‹åªä¼šè¿”å›ä¸€å¼ å›¾ç‰‡
//å›è°ƒé‡Œé¢çš„å­—å…¸ï¼ŒåŒ…å«è¿™å¼ å›¾ç‰‡ç›¸å…³çš„metaDataï¼Œæ¯”å¦‚ï¼šæ»¤é•œï¼Œå¸–å­ä»€ä¹ˆçš„
[[PHImageManager defaultManager] requestImageForAsset: phAsset
                                                   targetSize: CGSizeMake(resultImageWidth, resultImageHeight)
                                                  contentMode: PHImageContentModeAspectFill
                                                      options: nil
                                                resultHandler:^(UIImage * _Nullable result, NSDictionary * _Nullable info) {
            BOOL downloadFinished = (![[info objectForKey: PHImageCancelledKey] boolValue] &amp;&amp; ![info objectForKey: PHImageErrorKey]);
            if (downloadFinished &amp;&amp; result) {
                if (completion) {
                    completion(result, info, [[info objectForKey: PHImageResultIsDegradedKey] boolValue]);
                }
            }
            
            // Download image from iCloud
            if ([[info objectForKey: PHImageResultIsInCloudKey] boolValue] &amp;&amp; !result) {
                 PHImageRequestOptions *option = [[PHImageRequestOptions alloc] init];
                 option.networkAccessAllowed = YES;
                 [[PHImageManager defaultManager] requestImageDataForAsset: asset
                                                     options: option
                                               resultHandler:^(NSData * _Nullable imageData, NSString * _Nullable dataUTI, UIImageOrientation orientation, NSDictionary * _Nullable info) {
                    UIImage *resultImage = [UIImage imageWithData: imageData scale: [UIScreen mainScreen].scale];
                    if (resultImage &amp;&amp; completion) {
                        completion(resultImage, info, [[info objectForKey: PHImageResultIsDegradedKey] boolValue]);
                    }
                 }];
            }
}];

//LivePhotoä¹Ÿæ˜¯ç…§ç‰‡
//LivePhotoéœ€è¦PHLivePhotoViewæ¥å‘ˆç°ï¼Œå…·ä½“æ€ä¹ˆå±•ç°çœ‹Demoçš„ä»£ç 
//å…¶ä»–å’Œè·å–ç…§ç‰‡ä¹Ÿå·®ä¸å¤š
PHLivePhotoRequestOptions *livePhotoOptions = [[PHLivePhotoRequestOptions alloc] init];
livePhotoOptions.deliveryMode = PHImageRequestOptionsDeliveryModeHighQualityFormat;
livePhotoOptions.networkAccessAllowed = YES;
livePhotoOptions.progressHandler = ^(double progress, NSError *error, BOOL *stop, NSDictionary *info){
        dispatch_async(dispatch_get_main_queue(), ^{
            NSLog(@&quot;livePhotoProgress: %lf&quot;, progress);
        });
    };
    
    [[PHImageManager defaultManager] requestLivePhotoForAsset: phAsset targetSize: [UIScreen mainScreen].bounds.size contentMode: PHImageContentModeAspectFit options: livePhotoOptions resultHandler:^(PHLivePhoto * _Nullable livePhoto, NSDictionary * _Nullable info) {
        if (!livePhoto) {
            return ;
        }
        
        if (completion) {
            completion(livePhoto, info);
        }
    }];

//è·å–è§†é¢‘
PHVideoRequestOptions *options = [[PHVideoRequestOptions alloc] init];
options.networkAccessAllowed = YES;
options.progressHandler = ^(double progress, NSError *__nullable error, BOOL *stop, NSDictionary *__nullable info) {
            dispatch_async(dispatch_get_main_queue(), ^{
                NSLog(@&quot;videoProgress: %lf&quot;, progress);
            });
        };
        [[PHImageManager defaultManager] requestPlayerItemForVideo: asset options: options resultHandler:^(AVPlayerItem * _Nullable playerItem, NSDictionary * _Nullable info) {
            if (playerItem &amp;&amp; completion) {
                completion(playerItem, info);
            }
		}];

5.åˆ›å»ºç›¸å†Œï¼Œå‚¨å­˜å›¾ç‰‡æˆ–è€…è§†é¢‘ï¼Œç¼–è¾‘å›¾ç‰‡ï¼Œå…·ä½“çœ‹Demoä»£ç ï¼Œè¿™é‡Œå°±ä¸åœ¨åºŸè¯å¤šè¯´äº†
</code></pre>
<h2 id="ä¸‰æ€»ç»“">ä¸‰.æ€»ç»“</h2>
<p>è¿™è¾¹æ–‡ç« å¾ˆæ—©å°±å¼€å§‹å†™äº†ï¼Œæ–­æ–­ç»­ç»­å†™äº†å‡ ä¸ªæœˆï¼Œä¸€æ¥å·¥ä½œæœ‰æ—¶å¿™æ²¡æœ‰æ—¶é—´ï¼ŒäºŒæ¥ä¸»è¦æ˜¯è‡ªå·±æ‡’ã€‚ä½†æ˜¯ï¼Œæ€»çš„æ¥è¯´ï¼Œè¿˜æ˜¯å†™å®Œäº†ï¼Œè¿™ä¹Ÿæ˜¯æå¥½çš„ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[UIDynamicAnimator]]></title>
        <id>https://jashion.github.io/post/uidynamicanimator/</id>
        <link href="https://jashion.github.io/post/uidynamicanimator/">
        </link>
        <updated>2019-05-15T06:23:22.000Z</updated>
        <summary type="html"><![CDATA[<h2 id="åŠ¨åŠ›ç³»ç»Ÿwhat-is-the-uikit-dynamics">åŠ¨åŠ›ç³»ç»Ÿ(What is the UIKit Dynamics?)</h2>
<p>åŠ¨åŠ›ç³»ç»Ÿçš„å¼•å…¥ï¼Œå¹¶ä¸æ˜¯æ›¿ä»£CoreAnimationï¼Œè€Œæ˜¯å¯¹æ¨¡æ‹Ÿç°å®ä¸–ç•Œç‰©ä½“è¿åŠ¨çš„è¡¥å……ï¼Œæ¯”å¦‚ï¼Œç¢°æ’ï¼Œé‡åŠ›ï¼Œæ‚¬æŒ‚ç­‰ç­‰ã€‚æ‰€ä»¥è¯´ï¼ŒUIKitåŠ¨åŠ›ç³»ç»Ÿçš„å¼•å…¥ï¼Œå¤§å¤§ç®€åŒ–äº†ä¸€äº›äº¤äº’åŠ¨ç”»ï¼ˆä¸éœ€è¦è‡ªå·±å®ç°ä¸€äº›æ¨¡æ‹Ÿç°å®ä¸–ç•Œç‰©ç†åŠ¨åŠ›ç³»ç»Ÿçš„åŠ¨ç”»ï¼‰ï¼Œä¸°å¯Œäº†UIè®¾è®¡ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<h2 id="åŠ¨åŠ›ç³»ç»Ÿwhat-is-the-uikit-dynamics">åŠ¨åŠ›ç³»ç»Ÿ(What is the UIKit Dynamics?)</h2>
<p>åŠ¨åŠ›ç³»ç»Ÿçš„å¼•å…¥ï¼Œå¹¶ä¸æ˜¯æ›¿ä»£CoreAnimationï¼Œè€Œæ˜¯å¯¹æ¨¡æ‹Ÿç°å®ä¸–ç•Œç‰©ä½“è¿åŠ¨çš„è¡¥å……ï¼Œæ¯”å¦‚ï¼Œç¢°æ’ï¼Œé‡åŠ›ï¼Œæ‚¬æŒ‚ç­‰ç­‰ã€‚æ‰€ä»¥è¯´ï¼ŒUIKitåŠ¨åŠ›ç³»ç»Ÿçš„å¼•å…¥ï¼Œå¤§å¤§ç®€åŒ–äº†ä¸€äº›äº¤äº’åŠ¨ç”»ï¼ˆä¸éœ€è¦è‡ªå·±å®ç°ä¸€äº›æ¨¡æ‹Ÿç°å®ä¸–ç•Œç‰©ç†åŠ¨åŠ›ç³»ç»Ÿçš„åŠ¨ç”»ï¼‰ï¼Œä¸°å¯Œäº†UIè®¾è®¡ã€‚</p>
<!-- more --> 
<h2 id="åŠ¨åŠ›ç³»ç»Ÿæ€ä¹ˆä½¿ç”¨how-to-use-it">åŠ¨åŠ›ç³»ç»Ÿæ€ä¹ˆä½¿ç”¨(How to use it?)</h2>
<p><strong>UIKitåŠ¨åŠ›ç³»ç»Ÿç»“æ„å¦‚ä¸‹ï¼š</strong></p>
<figure data-type="image" tabindex="1"><img src="http://jashion.b0.upaiyun.com/images/UIDynamics.png" alt="image" loading="lazy"></figure>
<p>æ€»çš„æ¥è¯´ï¼Œå…ˆè¦æ³¨å†ŒUIç³»ç»Ÿä½“ç³»ï¼Œä¹Ÿå°±æ˜¯ç±»ä¼¼äºäºŒç»´çš„åæ ‡ç³»ï¼Œç„¶åæ·»åŠ æ‰€éœ€çš„è¡Œä¸ºä»¥åŠè¡Œä¸ºçš„ä½œç”¨ç‰©ä½“ï¼Œç„¶åè¯¥ç‰©ä½“å°±èƒ½åœ¨è®¾å®šçš„åæ ‡ä½“ç³»é‡Œï¼Œæ ¹æ®æ‰€æ·»åŠ çš„è¡Œä¸ºè¿åŠ¨ã€‚<br><br>
å…‰è¯´ä¸ç»ƒä¹ƒæ˜¯çº¸ä¸Šè°ˆå…µï¼Œæ²¡æœ‰æˆæ•ˆã€‚<br>
ä¸‹é¢åˆ†è§£åŠ¨åŠ›ç³»ç»Ÿæ‰€åŒ…å«çš„å‡ ç±»è¿åŠ¨ï¼š</p>
<p><strong>UIGravityBehavior</strong></p>
<p>é‡åŠ›ï¼Œè¿™ä¸ªå¤§å®¶åº”è¯¥éƒ½å¾ˆç†Ÿæ‚‰äº†ã€‚æˆ‘ä»¬æ¯å¤©éƒ½èƒ½æ„Ÿå—åˆ°å®ƒçš„å­˜åœ¨ï¼Œæ‰€è°“è„šè¸å®åœ°å°±æ˜¯è¿™ç§æ„Ÿè§‰ã€‚å°æ—¶å€™ï¼Œå¤§å®¶åº”è¯¥éƒ½æœ‰è¿‡ä»é«˜å¤„æŠŠä¸€äº›ç‰©ä½“æ‰”ä¸‹æ¥ï¼Œæˆ–è€…ç›´æ¥è®©å®ƒåè‡ªç”±è½ä½“è¿åŠ¨ï¼Œç›¸ä¼¼çš„ï¼Œè¿™ä¸ªGravityä¹Ÿæ˜¯æ¨¡æ‹Ÿé‡åŠ›è¡Œä¸ºï¼Œä¸‹é¢ç›´æ¥ä¸Šä»£ç ã€‚</p>
<pre><code>myAnimator = [[UIDynamicAnimator alloc] initWithReferenceView: self];
myAnimator.delegate = self;
UIGravityBehavior *gravityBehavior = [[UIGravityBehavior alloc] initWithItems: @[ball]];
[myAnimator addBehavior: gravityBehavior];

</code></pre>
<p>1.UIDynamicAnimatorå°±æ˜¯ä¸€ä¸ªæ’­æ”¾è€…ï¼Œå®¹å™¨ã€‚ä¸€ä¸ªå®¹çº³åŠ¨åŠ›ç³»ç»Ÿçš„ç¯å¢ƒï¼Œè€ŒreferenceViewå°±æ˜¯è¯¥ç¯å¢ƒçš„åæ ‡ç³»ï¼Œç‰©ä½“è¿åŠ¨çš„å‚ç…§ç³»ã€‚<br><br>
2. gravityBehaviorï¼Œåˆå§‹åŒ–ä¸€ä¸ªé‡åŠ›è¡Œä¸ºï¼Œè¡Œä¸ºçš„å—åŠ›ç‰©ä½“æ˜¯ballï¼ˆåªè¦å®ç°UIDynamicItemæ¥å£çš„ç±»éƒ½èƒ½ä½œä¸ºå—åŠ›ç‰©ä½“ï¼Œå¦‚ï¼ŒViewå’ŒUICollectionViewLayoutAttributesï¼‰ã€‚<br><br>
3. å°†è¿™ä¸ªè¡Œä¸ºæ·»åŠ åˆ°UIDynamicAnimatorä¸Šé¢å°±è¡Œäº†ã€‚<br><br>
4. æ˜¾ç¤ºæ•ˆæœçš„Demoä»¥åŠä»£ç ä¸‹è½½åœ¨æœ€åã€‚</p>
<p><strong>UICollisionBehavior</strong></p>
<p>ç¢°æ’è¡Œä¸ºï¼Œæœ€ç›´æ¥çš„æ„Ÿå—å°±æ˜¯ï¼Œç©å¼¹ç ï¼Œä¸€é¢—å¼¹ç å¯ä»¥è¢«å¦ä¸€é¢—å¼¹ç å¼¹å°„åˆ°å¾ˆè¿œçš„åœ°æ–¹ï¼ŒåŸç†å°±æ˜¯ç¢°æ’äº§ç”Ÿäº†ä¸€ä¸ªåæ–¹å‘çš„ä½œç”¨åŠ›ï¼Œè¿œç¦»äº‹æ•…å‘ç”Ÿåœ°ã€‚åºŸè¯ä¹Ÿä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šä»£ç ï¼š</p>
<pre><code>myAnimator = [[UIDynamicAnimator alloc] initWithReferenceView: self];

UICollisionBehavior *collision = [[UICollisionBehavior alloc] initWithItems: ballsArray2];        collision.translatesReferenceBoundsIntoBoundary = YES;
collision.collisionDelegate = self;
[myAnimator addBehavior: collision];

</code></pre>
<p>1.å’Œé‡åŠ›è¡Œä¸ºä¸€æ ·ï¼Œä¹Ÿè¦å…ˆåˆå§‹åŒ–ä¸€ä¸ªå®¹å™¨myAnimatorã€‚<br><br>
2.æ·»åŠ ç¢°æ’è¡Œä¸ºcollisionï¼Œcollision.translatesReferenceBoundsIntoBoundaryçš„å±æ€§æ˜¯å¦è®¾ç½®ä»¥å‚è€ƒViewçš„è¾¹ç•Œä¸ºç¢°æ’è¾¹ç•Œï¼Œæˆ‘ä»¬è¿™é‡Œé€‰æ‹©YESã€‚<br><br>
3.é™¤äº†è®¾ç½®å‚è€ƒViewçš„è¾¹ç•Œä¸ºç¢°æ’è¾¹ç•Œå¤–ï¼Œè¿˜å¯ä»¥è‡ªå·±è®¾å®šè¾¹ç•Œï¼Œä½¿ç”¨- addBoundaryWithIdentifier: forPath:æˆ–è€…addBoundaryWithIdentifier: fromPoint: toPoint:æ–¹æ³•å¯ä»¥è‡ªå·±è®¾å®šç¢°æ’è¾¹ç•Œçš„èŒƒå›´ã€‚<br>
4ã€‚æœ€åï¼Œä¹Ÿéœ€è¦æŠŠcollisionæ·»åŠ åˆ°myAnimatorä¸Šã€‚</p>
<p><strong>UIAttachmentBehavior</strong></p>
<p>æè¿°ä¸€ä¸ªç‰©ä½“å’Œä¸€ä¸ªé”šç‚¹æˆ–è€…å¦ä¸€ä¸ªç‰©ä½“çš„è¿æ¥ï¼Œå¯ä»¥æ˜¯å¼¹æ€§çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯éå¼¹æ€§çš„è¿æ¥ã€‚ç›´æ¥ä¸Šä»£ç ï¼š</p>
<pre><code>UIAttachmentBehavior *attachmentBehavior = [[UIAttachmentBehavior alloc] initWithItem: square offsetFromCenter: UIOffsetMake(0, - 40) attachedToAnchor: anchor];
attachmentBehavior.length = 100;
attachmentBehavior.damping = 0.3;
[myAnimator addBehavior: attachmentBehavior];

</code></pre>
<p>1.ç‰©ä½“é»˜è®¤çš„é”šç‚¹åœ¨ä¸­å¿ƒï¼Œå¯ä»¥è®¾ç½®åç§»ã€‚<br><br>
2.æ­¥éª¤ä¹Ÿæ˜¯å’Œå…¶å®ƒå¾—è¡Œä¸ºä¸€æ ·ï¼Œè®¾ç½®å‚æ•°ï¼ŒæŠŠè¯¥è¡Œä¸ºæ·»åŠ åˆ°myAnimatorä¸Šã€‚<br><br>
3.æ›´å¤šçš„æ–¹æ³•å’Œå±æ€§ï¼Œè¯·è‡ªè¡Œå‚è€ƒè‹¹æœå®˜æ–¹æ–‡æ¡£ã€‚</p>
<p><strong>UISnapBehavior</strong></p>
<p>å¸é™„è¡Œä¸ºï¼Œå°†UIViewé€šè¿‡åŠ¨ç”»å¸é™„åˆ°æŸä¸ªç‚¹ä¸Šã€‚APIéå¸¸ç®€å•ï¼Œçœ‹ä¸‹é¢ä»£ç å°±æ‡‚äº†ã€‚</p>
<pre><code>UISnapBehavior *snapBehavior = [[UISnapBehavior alloc] initWithItem: ballView snapToPoint: centerBall.center];
snapBehavior.damping = 0.4;
[myAnimator addBehavior: snapBehavior];
</code></pre>
<p><strong>UIPushBehavior</strong></p>
<p>æ¨åŠ¨åŠ›ï¼Œå¯ä»¥ç†è§£ä¸ºå‘ä¸€ä¸ªç‰©ä½“æ–½åŠ ä¸€ä¸ªä½œç”¨åŠ›ï¼Œå¯ä»¥æ˜¯æŒç»­çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç¬é—´çš„å†²å‡»ã€‚</p>
<pre><code>UIPushBehavior *pushBehavior = [[UIPushBehavior alloc] initWithItems: @[square] mode: UIPushBehaviorModeInstantaneous];
pushBehavior.pushDirection = CGVectorMake(velocity.x / 1000, velocity.y / 1000);
[myAnimator addBehavior: pushBehavior];

</code></pre>
<p><strong>UIDynamicItemBehavior</strong></p>
<p>è¿™å…¶å®ä¸æ˜¯ä¸€ç§è¡Œä¸ºï¼Œæˆ‘çš„ç†è§£æ˜¯å¯¹äºå°†è¦è¿›è¡Œå„ç§è¡Œä¸ºçš„ç‰©ä½“ä¸€äº›å‚æ•°ä¸Šé¢çš„è®¾ç½®ï¼Œæ¯”å¦‚ï¼Œå¼¹åŠ›ï¼Œéœ‡è¡é¢‘ç‡ï¼Œå¯†åº¦ç­‰ç­‰ã€‚</p>
<pre><code>UIDynamicItemBehavior *behavior3 = [[UIDynamicItemBehavior alloc] initWithItems: @[ballsArray2[2]]];
behavior3.elasticity = 0.5;
behavior3.friction = 0.3;
behavior3.resistance = 0.3;
[myAnimator addBehavior: behavior3];
</code></pre>
<h2 id="ç»„åˆgroup">ç»„åˆ(Group)</h2>
<p>æ‰€æœ‰çš„è¡Œä¸ºéƒ½å¯ä»¥ç»„åˆèµ·æ¥ï¼Œå¦‚ç¢°æ’å’Œé‡åŠ›ï¼Œå¯ä»¥ç±»ä¼¼äºç‰©ä½“åšè‡ªç”±è½ä½“è¿åŠ¨ï¼Œç„¶åå’Œåœ°é¢ç¢°æ’ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>myAnimator = [[UIDynamicAnimator alloc] initWithReferenceView: self];
//é‡åŠ›è¡Œä¸º
UIGravityBehavior *gravity = [[UIGravityBehavior alloc] initWithItems: @[ball]];
[myAnimator addBehavior: gravity];

//ç¢°æ’è¡Œä¸º
UICollisionBehavior *collision = [[UICollisionBehavior alloc] initWithItems: @[ball]];
collision.translatesReferenceBoundsIntoBoundary = YES;
collision.collisionDelegate = self;
[myAnimator addBehavior: collision];

//è®¾ç½®ç‰©ä½“çš„ä¸€äº›ç›¸å…³çš„å‚æ•°
UIDynamicItemBehavior *behavior = [[UIDynamicItemBehavior alloc] init];
behavior.elasticity = 0.8;
behavior.friction = 0.2;
behavior.resistance = 0.3;
behavior.density = 0.5;
behavior.angularResistance = 0.2;
[behavior addItem: ball];
[myAnimator addBehavior: behavior];

</code></pre>
<h2 id="è‡ªå®šä¹‰è¡Œä¸ºdiy">è‡ªå®šä¹‰è¡Œä¸º(DIY)</h2>
<p>1.å°†å®˜æ–¹çš„è¡Œä¸ºæ‰“åŒ…<br></p>
<ul>
<li>ç»§æ‰¿UIDynamicBehavior(ä¸€ä¸ªæŠ½è±¡ç±»)</li>
<li>å®ç°æ·»åŠ ç»„åˆè¡Œä¸ºçš„æ–¹æ³•ï¼Œæœ€å¥½å’Œå®˜æ–¹çš„ä¿æŒä¸€è‡´ï¼Œæ¯”å¦‚ï¼šinitWithItems:ï¼Œåœ¨é‡Œé¢è°ƒç”¨addChildBehaviorï¼šæ–¹æ³•æ·»åŠ éœ€è¦ç»„åˆçš„è¡Œä¸º</li>
<li>åˆå§‹åŒ–è¯¥ç»§æ‰¿ç±»ï¼Œç„¶åä½¿ç”¨</li>
</ul>
<pre><code>@interface GravityWithCollisionBehavior : UIDynamicBehavior

- (instancetype)initWithItems: (NSArray *)items;

@end

@implementation GravityWithCollisionBehavior

- (instancetype)initWithItems: (NSArray *)items {
    self = [super init];
    if (self) {
        UIGravityBehavior *gravityBehavior = [[UIGravityBehavior alloc] initWithItems: items];
        [self addChildBehavior: gravityBehavior];
        UICollisionBehavior *collisionBehavior = [[UICollisionBehavior alloc] initWithItems: items];
        collisionBehavior.translatesReferenceBoundsIntoBoundary = YES;
        [self addChildBehavior: collisionBehavior];
    }
    return self;
}

@end
</code></pre>
<p>2.å®Œå…¨è‡ªå®šä¹‰è¡Œä¸º<br><br>
UIDynamicBehavioré‡Œæä¾›äº†ä¸€ä¸ª<code>@property(nonatomic, copy) void (^action)(void)</code>ï¼Œanimatorå°†ä¼šåœ¨è¡Œä¸ºå‘ç”ŸæœŸé—´ï¼Œæ¯ä¸€æ­¥éƒ½è°ƒç”¨è¿™ä¸ªblockã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ æƒ³è‡ªå®šä¹‰è¡Œä¸ºå°±å¾—åœ¨è¿™é‡Œå†™è‡ªå·±çš„ä¸€äº›ä»£ç ã€‚å…·ä½“å°±æ˜¯åœ¨è¿™ä¸ªblockä¸­å‘æ‰€æœ‰çš„itemè¯¢é—®å®ƒä»¬å½“å‰çš„centerå’ŒtransformçŠ¶æ€ï¼Œç„¶åç»è¿‡è®¡ç®—ï¼ŒæŠŠæ–°çš„å€¼èµ‹äºˆç›¸åº”çš„itemï¼Œä»è€Œè¯¥æ”¹å˜å®ƒä»¬åœ¨å±å¹•ä¸Šçš„ä½ç½®ï¼Œå¤§å°ï¼Œè§’åº¦ï¼Œæ–¹å‘ç­‰ç­‰ã€‚</p>
<h2 id="æ€»ç»“summary">æ€»ç»“(Summary)</h2>
<p>æ€»çš„æ¥è¯´ï¼ŒiOS7å¼•è¿›çš„è¿™å¥—åŠ¨åŠ›ç³»ç»Ÿï¼Œå¤§å¤§ä¸°å¯Œäº†æˆ‘ä»¬åŠ¨ç”»è¡¨è¾¾ï¼Œä½†æ˜¯ï¼Œè¯¥ç³»ç»Ÿæœ‰ç€ä¸€äº›é™åˆ¶ï¼Œä¼šæ¶ˆè€—ä¸€å®šçš„CPUèµ„æºï¼Œå¹¶ä¸”ï¼Œå½“å®ƒä»¬è¢«æ·»åŠ åˆ°åŠ¨ç”»ç³»ç»Ÿåï¼Œåªèƒ½é€šè¿‡åŠ¨ç”»ç³»ç»Ÿæ”¹å˜ä½ç½®ï¼Œè€Œå¤–éƒ¨å¯¹äºUIDynamicsItemçš„center,transformç­‰è®¾å®šæ˜¯è¢«å¿½ç•¥çš„ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¯¥ç³»ç»Ÿä¹Ÿæ²¡æœ‰ç°å®ä¸–ç•Œé‚£ä¹ˆç²¾ç¡®ï¼Œå½“è®¡ç®—è¿­ä»£æ— æ³•å¾—åˆ°æœ‰æ•ˆè§£çš„æ—¶å€™ï¼ŒåŠ¨ç”»å°†æ— æ³•å¾—åˆ°æ­£ç¡®çš„å‘ˆç°ï¼Œæ‰€ä»¥ï¼Œä¸è¦å°†åŠ¨åŠ›ç³»ç»Ÿç¥åŒ–ã€‚</p>
<h2 id="demoå±•ç¤º">Demoå±•ç¤º</h2>
<figure data-type="image" tabindex="2"><img src="http://jashion.b0.upaiyun.com/images/UIDynamics.gif" alt="UIDynamicAnimator" loading="lazy"></figure>
<p><a href="https://github.com/jashion/UIDynamicAnimation.git">æºç ä¸‹è½½</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://jashion.github.io/post/hello-gridea/</id>
        <link href="https://jashion.github.io/post/hello-gridea/">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="http://hvenotes.fehey.com/">Gridea ä¸»é¡µ</a><br>
<a href="http://fehey.com/">ç¤ºä¾‹ç½‘ç«™</a></p>
<h2 id="ç‰¹æ€§">ç‰¹æ€§ğŸ‘‡</h2>
<p>ğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ <strong>Markdown</strong> è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ</p>
<p>ğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡</p>
<p>ğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„</p>
<p>ğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•</p>
<p>ğŸ’»  ä½ å¯ä»¥åœ¨ <strong>ğ–¶ğ—‚ğ—‡ğ–½ğ—ˆğ—ğ—Œ</strong> æˆ– <strong>ğ–¬ğ–ºğ–¼ğ–®ğ–²</strong> è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯</p>
<p>ğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ <strong>ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ</strong> æˆ– <strong>Coding Pages</strong> å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°</p>
<p>ğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ <a href="https://github.com/gitalk/gitalk">Gitalk</a> æˆ– <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> è¯„è®ºç³»ç»Ÿ</p>
<p>ğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨<strong>ä¸­æ–‡ç®€ä½“</strong>æˆ–<strong>è‹±è¯­</strong></p>
<p>ğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›</p>
<p>ğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥</p>
<p>ğŸŒ± å½“ç„¶ <strong>Gridea</strong> è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ğŸƒ</p>
<p>æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´</p>
<p>å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼</p>
<p>ğŸ˜˜ Enjoy~</p>
]]></content>
    </entry>
</feed>